首先是为何需要校准？


预估 ctr/cvr 等通常是一个监督学习，样本label并不是probability而是离散的二元值。例如，在CTR预估中，label只能是点击（label=1）或者未点击（label=0），而没有点击概率的 ground-truth。大部分用户行为的预估都采用了学习二分类器的方式来得到预估模型。这么一来就有可能存在一些问题如：模型假设不合适、特征不足或者样本采样等的问题，预估模型的结果和后验统计的概率通常会存在一定的偏差。

如何定义什么是“准”？

在一些论文的研究中，给出了一个简单的定义描述：给定一个二分类器，如果预估概率为 p 的样本中，正样本的占比也为 p，那么这个二分类器可以说是 perfectly calibrated。

如何抽象校准问题？
随机变量 X 和 Y 分别表示 predict 和 label。我们可以定义 Y 在 X=x 时的条件期望为，

$ E[Y|X=x] = \lim_{\epsilon \to 0} P(Y=1 | |X-x| <= \epsilon) $


从而误差函数为，
$ J(X, Y) = \int_x  (E[Y|X=x] - x)^2 dx$


那么优化目标就是，
$ f^* = argmin_f J(f(X), Y) $

求出来 f 就行了。

具体的校准算法详见，https://zhuanlan.zhihu.com/p/101766505







