OB 有两个级别的容灾：机房级和城市级。

# 机房级

部署逻辑是两地三机房五副本：
上海两机房（同城两机房不是主备关系，而是各自分担 50% 的流量，并且互为主备）、深圳一机房（只做容灾用）；五副本则是上海两机房各两个副本、深圳一个副本。
任意机房宕机均能保持三个多数派副本。
其中，事务提交时，需要写入三副本保障多数派成功后才算是提交成功。上海提交的话，会优先提交本城的三个副本，以减少跨城提交的网络延迟带来的负面影响。

# 城市级

部署逻辑是三地五机房五副本：
上海两机房（50% 流量），杭州两机房（50% 流量），深圳一机房（只做容灾用），同城两机房不是主备关系，而是各自分担该城市 50% 的流量，并且互为主备；五副本则是每个机房各一个副本。
任意机房/城市宕机均能保持三个多数派副本。
其中，事务提交时，需要写入三副本保障多数派成功后才算是提交成功。事务提交的话，会优先提交接近本城的三个副本，以减少跨原城市提交的网络延迟带来的负面影响。
